{% extends "layout.html" %}
{% block title %}Project Ideas for GSoC 2019{% endblock %}

{% block body %}
  <p class="text-muted">This is the project idea list for the <a href="/gsoc-2019">Google Summer of Code 2019</a> program. We have a mix of projects that are meant to be installed widely (such as plugins for other software) and projects that are more focused on improving user experience for users of Creative Commons licenses. Regardless of scope, these projects all have a broad and positive community impact.</p>
  <a name="ideas-top"></a>
  <hr/>
  <!-- We display all ideas by default. -->
  {% set ideas = site.query('/gsoc-2019/project-ideas/project-ideas-list').include_undiscoverable(true) %}
  <!-- The following code filters the ideas to display based on the current URL. These mappings are defined in the "databags" folder. 
  Jinja does not support changing values of variables inside loops, so we have to use namespace objects.
  See "Scoping Behavior" here: http://jinja.pocoo.org/docs/2.10/templates/#assignments -->
  {% set ns = namespace(field=None, value=None) %}
  {% for slug, data in bag('project-filters').iteritems() %}
    {% if this._slug == slug %}
      {% set ns.field = data['field'] %}
      {% set ns.value = data['value'] %}
    {% endif %}
  {% endfor %}
  {% if ns.field == 'difficulty' %}
    {% set ideas = ideas.filter(F.difficulty == ns.value) %}
  {% endif %}
  {% if ns.field == 'skill' %}
    {% set ideas = ideas.filter(F.skills_recommended.contains(ns.value)) %}
  {% endif %}
  <div class="mt-4">
    <div>
      {% for slug, data in bag('project-filters').iteritems() %}
        <a href="{{ data['path'] }}">
          <button type="button" class="btn btn-sm {% if this._path == data['path'] %}btn-dark{% else %}btn-primary{% endif %}" {% if this._path == data['path'] %}disabled{% endif %}>
            {{ data['nav_label'] }}
          </button>
        </a>
      {% endfor %}
      <ul class="list-unstyled m-3">
      {% for idea in ideas %}
        <li class="my-2"><a href="#{{ idea._slug }}">{{ idea.title }}</a></li>
      {% endfor %}
      </ul>
    </div>
    <hr/>
    {% for idea in ideas %}
      <div class="project-idea-card m-1 mb-4">
        <h2 class="card-header"><a name="{{ idea._slug }}">{{ idea.title }}</a></h5>
        <ul class="list-group list-group-flush">
          <li class="list-group-item"><strong>Description:</strong> {{ idea.description }}</li>
          <li class="list-group-item"><strong>Rationale:</strong> {{ idea.rationale }}</li>
          <li class="list-group-item"><strong>Resources:</strong> {{ idea.resources }}</li>
          <li class="list-group-item"><strong>Expected result:</strong> {{ idea.expected_result }}</li>
          <li class="list-group-item"><strong>Skills recommended:</strong> {{ idea.skills_recommended }}</li>
          <li class="list-group-item"><strong>Mentors:</strong> {{ idea.primary_mentor }} (primary), {{ idea.backup_mentor}} (backup)</li>
          <li class="list-group-item"><strong>Difficulty:</strong> {{ idea.difficulty }}</li>
          <li class="list-group-item"><strong>Proposal tag to use:</strong> {{ idea.proposal_tag }}</li>
        </ul>
      </div>
    {% endfor %}
    <a id="back-to-top" href="#ideas-top" class="btn btn-dark btn-sm" role="button">Back to list</a>
  </div>
{% endblock %}
